<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id: chapter.docbook.xml 611 2013-06-05 07:27:35Z netkiller $ -->
<part id="index"><?dbhtml dir="docbook" ?>
	<title>Docbook</title>
	<para><ulink url="http://www.docbook.org/">http://www.docbook.org/</ulink></para>
	<para>http://docbook.org/tdg51/en/html/docbook.html</para>
	<chapter id="license">
		<title>Open Document Licenses</title>
	 	<para>Creative Commons Attribution 3.0</para><!-- http://creativecommons.org/about/downloads -->
		<para>GNU Free Documentation License</para>
		<para>Open Publication License</para>
		<para>The FreeBSD Documentation License</para>
	</chapter>

	&chapter.docbook-website.xml;
	&chapter.docbook.epub.xml;

<chapter id="docbook.tools">
	<title>Document Tools</title>
	<para>Docbook SGML,XML 转换程序</para>
	<section id="docbook-utils">
		<title>SGML</title>
		<screen>
sudo apt-get install docbook-utils
		</screen>
		<para>CentOS</para>
		<screen>
# yum install docbook*
		</screen>
	</section>
	<section id="docbook-xml">
		<title>XML 转换</title>
		<para>docbook-xsl-1.73.2.tar.gz</para>
		<para>docbook-dsssl-1.79.tar.gz</para>
		<para>rxp - A validating XML parser</para>
		<para>rxp -s file.xml</para>
		<para>To validate file.xml, use the command:</para>
		<para>$ rxp -s -V file.xml</para>
		<section id="xsltproc">
			<title>xsltproc - XSLT command line processor</title>
			<para>xsltproc --stringparam html.stylesheet docbook.css ../../docbook-xsl-1.73.2/xhtml/chunk.xsl ../book.xml</para>
			<screen>
$ sudo apt-get install docbook-xsl
$ export DSSSL=/usr/share/xml/docbook/stylesheet/nwalsh/xhtml/chunk.xsl
$ /usr/bin/xsltproc --stringparam html.stylesheet docbook.css ${DSSSL} ../book.xml

			</screen>
		</section>
		<section id="docbook-ebnf">
			<title>docbook-ebnf - EBNF module for the XML version of the DocBook DTD</title>
			<para>docbook-ebnf - EBNF module for the XML version of the DocBook DTD</para>
			<screen>
$ sudo apt-get install docbook-ebnf
			</screen>
		</section>
	</section>
	<section id="xmllint">
		<title>XML 校验</title>
		<screen>
$ xmllint book.xml
		</screen>
	</section>
	<section id="stringparam">
		<title>Docbook参数</title>
		<para>/usr/share/xml/docbook/stylesheet/nwalsh/xhtml/param.xsl</para>
		<screen>
		<![CDATA[
默认HTML格式输出文件中的章内小节是没有自动编号功能的，如果要实现小节自动编号需要设置HTML格式的两个转换参数。

section.autolabel参数为1代表章内小节可自动编号，为0表示不会自动编号；

section.label.includes.component.label参数为1表示章内小节编号包含章节编号,为0表示不包含章节编号。

设置这两个参数可通过命令行方式，也可通过修改XSL转换文件方法。下面分别介绍这两种方法：

通过命令行方式：

$ xsltproc --stringparam  section.autolabel 1 \
           --stringparam  section.label.includes.component.label 1 \
           docbook.xsl  myfile.xml>myfile.htm
修改XSL转换文件方式：

DocBook文档的HTML格式转换样式文件一般位于/usr/share/sgml/docbook/docbook-xsl-1.65.1/html/目录下。通过查看docbook.xsl文件可知，在docbook.xsl中引用param.xsl作为参数设置文件，所有的参数都在这里设置。我们打开param.xsl文件，找到以下两行，再把参数置成1就可以了。

<xsl:param name="section.autolabel" select="1"/>
<xsl:param name="section.label.includes.component.label" select="1"/>
		]]>
		</screen>
		<para>另一种方法</para>
		<screen>
		<![CDATA[
cat my_docbook.xsl
<?xml version='1.0'?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version='1.0'>
<xsl:include href="/usr/share/xml/docbook/stylesheet/nwalsh/html/docbook.xsl"/>
<xsl:output method="html"
            encoding="UTF-8"
            indent="no"/>
</xsl:stylesheet>

xsltproc -o docbook.html my_docbook.xsl docbook.xml
		]]>
		</screen>
		<section>
			<title>字符集</title>
			<screen>
--stringparam chunker.output.encoding UTF-8
			</screen>
		</section>
		<section>
			<title>Filename prefix</title>
			<screen>
			<![CDATA[
base.dir parameter value	Description	Example 					chunk filename
base.dir="htmlout/"			Output directory only.					htmlout/chap1.html
base.dir="refbook-"			Filename prefix only.					refbook-chap1.html
base.dir="htmlout/refbook-"	Output directory and filename prefix.	htmlout/refbook-chap1.html
			]]>
			</screen>
			<para>base.dir parameter</para>
			<screen>
xsltproc --stringparam base.dir /usr/apache/htdocs/ chunk.xsl myfile.xml
			</screen>
		</section>
	</section>
	<section id="docbook.pdf">
		<title>PDF</title>
		<screen>
sudo apt-get install docbook-xml docbook-xsl xsltproc fop
		</screen>
		<para>安装字体</para>
		<screen>
sudo mkdir /usr/share/fonts/microsoft
		</screen>
		<para>将 C:\Windows\Fonts 目录中的字体复制到 /usr/share/fonts/microsoft </para>
		<screen>
$ java -cp /usr/share/java/fop.jar  org.apache.fop.fonts.apps.TTFReader /usr/share/fonts/microsoft/simhei.ttf simhei.xml
$ java -cp /usr/share/java/fop.jar  org.apache.fop.fonts.apps.TTFReader -ttcname "SimSun" /usr/share/fonts/microsoft/simsun.ttc simsun.xml
		</screen>

		<screen>
		<![CDATA[
sudo vim /usr/share/xml/docbook/stylesheet/docbook-xsl/fo/param.xsl
<xsl:param name="callout.unicode.font">simsun</xsl:param>
<xsl:param name="symbol.font.family">simsun</xsl:param>
<xsl:param name="callout.unicode.font">simsun</xsl:param>
		]]>
		</screen>
		<!--
<xsl:param name="body.font.family"></xsl:param>
<xsl:param name="title.font.family"></xsl:param>
		 -->
		 <screen>
		 <![CDATA[
$ vim fop.conf

<?xml version="1.0"?>
<fop version="1.0">
<base>.</base>

<renderers>
	<renderer mime="application/pdf">
     <filterList>
         <value>flate</value>
     </filterList>
      <fonts>
        <font metrics-url="simhei.xml" kerning="yes" embed-url="/usr/share/fonts/microsoft/simhei.ttf">
          <font-triplet name="simhei" style="normal" weight="normal"/>
          <font-triplet name="simhei" style="normal" weight="bold"/>
          <font-triplet name="simhei" style="italic" weight="normal"/>
          <font-triplet name="simhei" style="italic" weight="bold"/>
          </font>
          <font metrics-url="simsun.xml" kerning="yes" embed-url="/usr/share/fonts/microsoft/simsun.ttc">
          <font-triplet name="simsun" style="normal" weight="normal"/>
          <font-triplet name="simsun" style="normal" weight="bold"/>
          <font-triplet name="simsun" style="italic" weight="normal"/>
          <font-triplet name="simsun" style="italic" weight="bold"/>
          </font>
        </fonts>
    </renderer>
</renderers>
</fop>
		 ]]>
		 </screen>
		<screen>
xsltproc -o helloworld.fo /usr/share/xml/docbook/stylesheet/docbook-xsl/fo/docbook.xsl helloworld.xml
fop -c fop.conf helloworld.fo -pdf helloworld.pdf
		</screen>
	</section>
	<section id="chm">
		<title>CHM</title>
		<screen>
copy “c:\Program Files\HTML Help Workshop\hhc.exe” d:\docbook\example
xsltproc –xinclude docbook_chm.xsl docbook.xml
hhc.exe htmlhelp.hhp
		</screen>
	</section>
	<section id="docbook2odf">
		<title>docbook2odf - Convert docbook document to Oasis Open Document</title>
		<screen>
sudo apt-get install docbook2odf
		</screen>
		<screen>
docbook2odf book.xml
		</screen>
	</section>
</chapter>

	&chapter.docbook.html.xml;
	&chapter.docbook.doctype.xml;

<chapter id="part-chapter-section">
	<title>Part / Chapter / Section</title>
	<section id="part">
		<title>part</title>
		<programlisting>
		<![CDATA[
<part>
	<title>Part</title>
</part>
		]]>
		</programlisting>
		<programlisting>
		<![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<book version="5.0" xmlns="http://docbook.org/ns/docbook"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xmlns:xi="http://www.w3.org/2001/XInclude">
  <info>
    <title>The Gallio Book</title>
    <authorgroup>
      <author><personname>The Gallio Documentation Team</personname></author>
    </authorgroup>
    <copyright>
      <year>2009</year>
      <holder>Gallio Project</holder>
    </copyright>
    <address>http://www.gallio.org/</address>
    <xi:include href="ReleaseInfo.docbook"/>
  </info>

  <xi:include href="Preface.docbook" />
  <part label="I" xml:id="part_Using">
    <title>Using MbUnit and Gallio</title>
    <xi:include href="Installation/Installation.docbook" />
  </part>

  <part label="II" xml:id="part_Developing">
    <title>Developing MbUnit and Gallio</title>
    <xi:include href="GallioDevelopmentBasics/GallioDevelopmentBasics.docbook" />
  </part>

  <part label="III" xml:id="appendices">
    <title>Appendices</title>
    <xi:include href="Appendices/MigrationGuide.docbook" />
  </part>

</book>
		]]>
		</programlisting>
	</section>
	<section id="chapter">
		<title>chapter</title>
		<programlisting>
		<![CDATA[
	<part>
		<title>Part</title>
		<chapter>
			<title>Chapter</title>
		</chapter>
		<chapter>
			<title>Chapter</title>
		</chapter>
	</part>
		]]>
		</programlisting>
		<section>
			<title>chapterinfo</title>
			<programlisting>
			<![CDATA[
	<chapterinfo>
		<abstract>
		  <para>Kickstart 无人值守安装</para>
		</abstract>
		<keywordset>
			<keyword>ISO</keyword>
			<keyword>kickstart</keyword>
			<keyword>ks</keyword>
		</keywordset>
	</chapterinfo>

<chapterinfo>
<keywordset>
  <keyword>images</keyword>
  <keyword>illustrations</keyword>
</keywordset>
<itermset>
  <indexterm zone="figures"><primary>Figures</primary></indexterm>
  <indexterm zone="figures"><primary>Pictures</primary></indexterm>
  <indexterm zone="notreal">
    <primary>Sections</primary><secondary>Not Real</secondary>
  </indexterm>
</itermset>
</chapterinfo>
			]]>
			</programlisting>
		</section>
		<section>
			<title>epigraph</title>
			<programlisting>
			<![CDATA[
<epigraph>

<attribution>
   <ulink url="http://www.margepiercy.com/">Marge Piercy</ulink>
</attribution>

<para>
   Life is the first gift, love is the second, and understanding is the third.
</para>

</epigraph>
			]]>
			</programlisting>
		</section>
	</section>
	<section id="section">
		<title>section</title>

		<programlisting>
		<![CDATA[
<part>
	<title>Part I</title>
	<chapter>
		<title>Chapter 1</title>
		<section>
			<title>Section 1</title>
		</section>
	</chapter>
</part>
		]]>
		</programlisting>
	</section>
	<section id="title">
		<title>title</title>

		<programlisting>
		<![CDATA[
<part>
	<title>Part I</title>
	<chapter>
		<title>Chapter 1</title>
		<section>
			<title>Section 1</title>
		</section>
	</chapter>
</part>
		]]>
		</programlisting>
		<section>
			<title>subtitle</title>
			<programlisting>
			<![CDATA[
<part>
	<title>Part I</title>
	<subtitle>Part I subtitle</subtitle>
	<chapter>
		<title>Chapter 1</title>
		<subtitle>Chapter 1 subtitle</subtitle>
		<section>
			<title>Section 1</title>
			<subtitle>Section 1 subtitle</subtitle>
		</section>
	</chapter>
</part>
			]]>
			</programlisting>
		</section>
		<section>
			<title>titleabbrev</title>
			<programlisting>
			<![CDATA[
<part>
	<title>Part I</title>
	<subtitle>Part I subtitle</subtitle>
	<titleabbrev>Part I titleabbrev</titleabbrev>
	<chapter>
		<title>Chapter 1</title>
		<subtitle>Chapter 1 subtitle</subtitle>
		<titleabbrev>Chapter I titleabbrev</titleabbrev>
		<section>
			<title>Section 1</title>
			<subtitle>Section 1 subtitle</subtitle>
			<titleabbrev>Section I titleabbrev</titleabbrev>
		</section>
	</chapter>
</part>
			]]>
			</programlisting>
		</section>
	</section>
</chapter>

<chapter id="appendix">
	<title>appendix</title>
	<programlisting>
	<![CDATA[
<appendix>
    <title>Appendix One</title>
    <para>Appendix content.</para>
</appendix>

	]]>
	</programlisting>
</chapter>

<chapter id="glossary">
	<title>术语表 glossary</title>
	<programlisting>
	<![CDATA[
<glossary><title>词汇表的例子</title>
	<glossdiv><title>E</title>

		<glossentry id="xml"><glossterm>Extensible Markup Language</glossterm>
			<acronym>XML</acronym>
			<glossdef>
			<para>关于XML的定义...</para>
			<glossseealso otherterm="sgml">
			</glossdef>
		</glossentry>

	</glossdiv>
</glossary>
	]]>
	</programlisting>
	<para>引用</para>
	<programlisting>
	<![CDATA[
<glossterm linkend="xml">Extensible Markup Language</glossterm> is a new standard…
	]]>
	</programlisting>
</chapter>

	&chapter.docbook.paragraphs.xml;
	&chapter.docbook.list.xml;
<chapter id="table">
	<title>Table</title>
	<programlisting>
	<![CDATA[
<table>
   <title>表格标题</title>
   <tgroup cols="2">
     <thead>
       <row>
          <entry>列标题1</entry>
          <entry>列标题2</entry>
       </row>
     </thead>
    <tbody>
       <row>
          <entry>列内容1</entry>
          <entry>列内容2</entry>
       </row>
       ...
    </tbody>
   </tgroup>
</table>
		]]>
	</programlisting>
	<table>
	   <title>表格标题</title>
	   <tgroup cols="2">
	     <thead>
	       <row>
	          <entry>列标题1</entry>
	          <entry>列标题2</entry>
	       </row>
	     </thead>
	    <tbody>
	       <row>
	          <entry>列内容1</entry>
	          <entry>列内容2</entry>
	       </row>
	       ...
	    </tbody>
	   </tgroup>
	</table>
</chapter>
<chapter id="images">
	<title>Images</title>
	<section id="figure">
		<title>figure</title>
		<programlisting>
		<![CDATA[
<figure>
 <title>My Image</title>
 <screenshot>
  <screeninfo>Sample GNOME Display</screeninfo>
  <graphic  format="png" fileref="myfile" srccredit="me">
  </graphic>
 </screenshot>
</figure>
		]]>
		</programlisting>
	</section>
	<section id="mediaobject">
		<title>mediaobject</title>
		<programlisting>
		<![CDATA[
<figure>
	<title>OpenOffice MS-compatible Spreadsheet</title>
	<mediaobject>
		<imageobject>
			<imagedata fileref="images/openoffice.png" format="PNG"></imagedata>
		</imageobject>
		<imageobject>
			<imagedata fileref="images/openoffice.eps" format="EPS"></imagedata>
		</imageobject>
		<textobject>
			<phrase>OpenOffice spreadsheet looks just like MS Office .xls file.</phrase>
		</textobject>
	</mediaobject>
</figure>
		]]>
		</programlisting>
	</section>
	<section id="screenshot">
		<title>screenshot</title>
		<programlisting>
		<![CDATA[
<figure id="app-FIG-shot1">
 <title>Screenshot</title>
 <screenshot>
  <mediaobject>
   <imageobject>
    <imagedata fileref="figures/example_screenshot.png" format="PNG"/>
   </imageobject>
   <textobject>
     <phrase>Shows the application screenshot with several buttons.</phrase>
   </textobject>
   <caption>
    <para>Screenshot of a program</para>
   </caption>
  </mediaobject>
 </screenshot>
</figure>
		]]>
		</programlisting>
	</section>
</chapter>

	&chapter.docbook.admonition.xml;

<chapter id="terminal">
	<title>Computer terminal</title>
	<section id="literallayout">
		<title>literallayout</title>
		<programlisting role="xml">
		<![CDATA[
<literallayout>
1
2
3
</literallayout>
		]]>
		</programlisting>
	</section>
	<section id="programlisting">
		<title>programlisting</title>
		<programlisting role="xml">
		<![CDATA[
<programlisting role="c">
#include &lt;stdio.h&gt;

int
main(void)
{
    printf("hello, world\n");
}
</programlisting>

<programlisting language="java">
</programlisting>

<programlisting linenumbering="numbered" startinglinenumber="12">

</programlisting>

<programlisting linenumbering="numbered" >
<?dbhtml linenumbering.everyNth="2" linenumbering.separator=" &gt;" linenumbering.width="2" ?>
<?dbfo linenumbering.everyNth="2" linenumbering.separator=" &gt;" linenumbering.width="2" ?>
<textobject><textdata  fileref="mycode.c" /></textobject>
</programlisting>

<example><title>My program listing</title>
  <programlisting><textobject><textdata
     fileref="mycode.c" /></textobject></programlisting>
</example>

Using XInclude for text inclusions
<example><title>My program listing</title>
  <programlisting><xi:include  href="mycode.c"  parse="text"
      xmlns:xi="http://www.w3.org/2001/XInclude"/></programlisting>
</example>
		]]>
		</programlisting>
		<programlisting>
		<![CDATA[
<programlisting linenumbering="numbered" startinglinenumber="12">
<![CDATA[
#include <stdio.h>

int main(void)
{
   printf("Hello, world!\n");
   return 0;
}
]] >
</programlisting>

<programlisting linenumbering="numbered" >
	<?dbhtml linenumbering.everyNth="2" linenumbering.separator=" &gt;" linenumbering.width="2"?>
	<?dbfo linenumbering.everyNth="2"   linenumbering.separator=" &gt;" linenumbering.width="2"?>
	<textobject><textdata  fileref="mycode.c" /></textobject>
</programlisting>
		]]>
		</programlisting>

		<programlisting language="php" linenumbering="numbered" startinglinenumber="12">
		<![CDATA[
<?php

class foo
{
	private $bar;

	public function __construct($bar)
	{
		$this->bar = $bar;
	}

	/**
	 * getFoo
	 *
	 * Returns bar if $this->bar is foo else foo .. Oo ;D
	 *
	 * @return string
	 */
	public function getFoo()
	{
		if($this->bar == 'foo')
		{
			return 'bar';
		}
		else
		{
			return 'foo';
		}
	}
}
		]]>
		</programlisting>

		<section id="calloutlist">
			<title>Callouts</title>
			<programlisting>
			<![CDATA[
<screen>
bash@host:~/cvs/newbiedoc$ ls -l
total 48
<co id="perm">drwxr-sr-x    2 jesse    jesse        4096 May  4 16:26 CVS<co id="cvs">
drwxr-sr-x    3 jesse    jesse        4096 Mar 29 03:29 dev
drwxr-sr-x    3 jesse    jesse        4096 Apr  8 19:31 general
drwxr-sr-x    3 jesse    jesse        4096 Apr  9 00:15 images
</screen>

<calloutlist>
   <callout arearefs="cvs">
      <para>
      This is the CVS directory.  CVS files are stored here.
      </para>
   </callout>

   <callout arearefs="perm">
      <para>
      These are the permissions for the CVS directory.
      </para>
   </callout>
</calloutlist>
			]]>
			</programlisting>
		</section>
	</section>
	<section id="userinput">
		<title>userinput</title>
		<para>ls -l $KDEDIR</para>
		<programlisting>
		<![CDATA[
<userinput><command>ls</command>
<option>-l</option>
<parameter>$<envar>KDEDIR<envar></parameter>
</userinput>
		]]>
		</programlisting>
		<para>export $KDEDIR=/usr/local/kde</para>
		<programlisting>
		<![CDATA[
<userinput>
<command>export</command>
<parameter>$<envar>KDEDIR</envar>=<filename>
/usr/local/kde</filename></parameter></userinput>
		]]>
		</programlisting>
	</section>
	<section id="keyboard">
		<title>Keyboard Input</title>
		<programlisting>
		<![CDATA[
<keycombo>
 <keycap>Ctrl</keycap>
 <keycap>Alt</keycap>
 <keycap>F1</keycap>
</keycombo>
		]]>
		</programlisting>

		<programlisting>
		<![CDATA[
<menuchoice>
 <shortcut>
  <keycombo><keycap>Ctrl</keycap><keycap>q</keycap></keycombo>
 </shortcut>
 <guimenuitem> Quit</guimenuitem>
</menuchoice>
		]]>
		</programlisting>

	</section>
</chapter>

<chapter id="references">
	<title>Cross references</title>
	<section id="link">
		<title>link</title>
		<programlisting>
		<![CDATA[
<link linkend="table">Table</link>
<link linkend="article-My-Article-sec"><quote>sec</quote></link>

<link linkend="font"><quote>font</quote></link>
		]]>
		</programlisting>
	</section>
	<section id="ulink">
		<title>ulink</title>
		<programlisting>
		<![CDATA[
<ulink url="http://netkiller.hikz.com">homepage</ulink>
		]]>
		</programlisting>
	</section>
	<section id="xref">
		<title>xreflabel / xref</title>
		<programlisting>
		<![CDATA[
<para  id="ChooseSCSIid"  xreflabel="choosing a SCSI id">The methods
for choosing a <acronym>SCSI</acronym> id are ...
</para>
...
<para>
See the paragraph on <xref  linkend="ChooseSCSIid"/>.
</para>
		]]>
		</programlisting>
		<programlisting>
		<![CDATA[
<para  id="ChooseSCSIid"  >The methods
for <phrase  id="SCSIxref">choosing a <acronym>SCSI</acronym> id</phrase>
are ...
</para>
...
<para>
See the paragraph on <xref  linkend="ChooseSCSIid"  endterm="SCSIxref"/>.
</para>
		]]>
		</programlisting>
	</section>
</chapter>
	&chapter.htmlforms.xml;
</part>
